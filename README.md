Ниже вариант полного README, уже переписанный и структурированный под твой проект (можешь подправить название репо и URL при необходимости).

text
# Quizzix

Quizzix — это веб‑приложение для создания и прохождения квизов с системой категорий, подсчётом результатов и лидербордом.  
Backend реализован на Go (Gin + GORM + SQLite), фронтенд — на Vue 3 + Vite.

## Авторы

- Анастасия Иванова — разработка frontend и UX
- Евгений Швецов — разработка backend и тестирование

## Содержание

- [Описание проекта](#описание-проекта)
- [Архитектура backend](#архитектура-backend)
  - [Структура пакетов](#структура-пакетов)
  - [Модели данных](#модели-данных)
  - [Инициализация и демо‑данные](#инициализация-и-демо-данные)
  - [Переменные окружения](#переменные-окружения)
- [REST API backend](#rest-api-backend)
  - [Пользователи и аутентификация](#пользователи-и-аутентификация)
  - [Квизы](#квизы)
  - [Категории](#категории)
  - [Вопросы и ответы](#вопросы-и-ответы)
  - [Проверка прохождения квиза](#проверка-прохождения-квиза)
  - [Лидерборд и статистика](#лидерборд-и-статистика)
- [Тестирование backend](#тестирование-backend)
- [Фронтенд](#фронтенд)
  - [Стек и запуск фронтенда](#стек-и-запуск-фронтенда)
  - [Структура фронтенд‑проекта](#структура-фронтенд-проекта)
  - [Навигация и основные экраны](#навигация-и-основные-экраны)
  - [Аутентификация и работа с backend](#аутентификация-и-работа-с-backend)
  - [Визуальное оформление и UX](#визуальное-оформление-и-ux)
- [Основные сценарии использования](#основные-сценарии-использования)
- [Роли и права доступа](#роли-и-права-доступа)
- [Быстрый запуск всего приложения](#быстрый-запуск-всего-приложения)

---

## Описание проекта

Quizzix предоставляет пользователям возможность:

- создавать собственные квизы с вопросами и несколькими вариантами ответов;
- проходить квизы с подсчётом результатов и сохранением статистики;
- просматривать личные результаты и общий лидерборд;
- управлять своими квизами (создание, просмотр, удаление);
- для администраторов — управлять пользователями и их ролями.

Backend — монолитный REST‑сервер на Gin с использованием GORM и SQLite.  
Фронтенд — SPA на Vue 3 с маршрутизацией через vue-router и взаимодействием с API через axios.

---

## Архитектура backend

### Структура пакетов

- `cmd/server/main.go` — точка входа приложения; инициализация БД, миграции, запуск HTTP‑сервера и регистрация маршрутов.
- `internal/models` — доменные сущности:
  - `User`
  - `Category`
  - `Quiz`
  - `Question`
  - `Answer`
  - `Result`
- `internal/handlers` — обработчики HTTP‑запросов:
  - пользователи и аутентификация;
  - квизы;
  - категории;
  - вопросы/ответы;
  - проверка теста (подсчёт результата);
  - лидерборд.

### Модели данных

- **User**  
  Пользователь с уникальными `username` и `email`, захешированным паролем, полем `total_score` и ролью (`user` или `admin`).

- **Category**  
  Категория квизов с названием, описанием и ссылкой на изображение.

- **Quiz**  
  Квиз, привязанный к категории и автору. Содержит заголовок, описание, картинку и связи с вопросами и результатами.

- **Question**  
  Вопрос квиза с текстом, опциональным лимитом времени, опциональной картинкой и списком ответов.

- **Answer**  
  Вариант ответа с флагом корректности.

- **Result**  
  Результат прохождения квиза: набранный балл, максимальное количество баллов, затраченное время, ссылка на пользователя и квиз.

### Инициализация и демо‑данные

При старте приложения:

- выполняется подключение к базе `quizzix.db` (SQLite);
- вызывается `AutoMigrate` для всех моделей;
- при пустой таблице квизов создаются демо‑данные:
  - пользователи (`admin`, `test`);
  - несколько категорий с описаниями;
  - несколько тестовых квизов с вопросами и ответами.

Это позволяет сразу протестировать основные сценарии без ручного ввода данных.

### Переменные окружения

- `JWT_SECRET` — секрет для подписи JWT‑токенов.  
  Если переменная окружения не задана, используется значение по умолчанию в коде (подходит только для локальной разработки).  
  Для production‑запуска рекомендуется обязательно задавать `JWT_SECRET` во внешней среде.

---

## REST API backend

Ниже перечислены основные группы эндпоинтов.

### Пользователи и аутентификация

- `POST /api/register`  
  Регистрация нового пользователя.  
  Принимает `username`, `email`, `password`, валидирует обязательные поля, хеширует пароль и создаёт запись в базе.

- `POST /api/login`  
  Аутентификация по `username` и `password`.  
  Проверяет наличие пользователя и корректность пароля, выдаёт JWT‑токен и данные пользователя.

- `GET /api/users`  
  Получение списка пользователей с минимальным набором полей (`id`, `username`, `email`, `role`).

- `GET /api/users/:id`  
  Получение профиля пользователя по идентификатору.

- `GET /api/users/:id/results`  
  Список результатов прохождения квизов пользователем, отсортированный по дате.

- `POST /api/users/setAdmin`  
  Установка роли `admin` для выбранного пользователя.  
  Проверяется, что вызывающий сам является админом, невозможность повысить самого себя и корректность обновления в БД.

### Квизы

- `GET /api/quizzes`  
  Получение списка всех квизов.

- `GET /api/quizzes/:id`  
  Получение информации о конкретном квизе.

- `GET /api/users/:id/quizzes`  
  Получение квизов, созданных конкретным автором, вместе с информацией о категориях и общим количеством.

- `POST /api/quizzes`  
  Создание нового квиза.  
  Принимает заголовок, описание, картинку, категорию, автора и список вопросов с ответами.  
  Выполняет базовую валидацию и создаёт квиз, вопросы и ответы в БД.

- `POST /api/quizzes/delete`  
  Удаление квиза.  
  Доступно автору квиза или администратору. Перед удалением выполняется проверка прав.

### Категории

- `GET /api/categories`  
  Получение списка категорий.

- `GET /api/categories/:id`  
  Получение категории по идентификатору.

- `GET /api/categories/:id/quizzes`  
  Получение квизов в заданной категории.

### Вопросы и ответы

- `GET /api/quizzes/:id/questions`  
  Получение вопросов для указанного квиза с предзагрузкой ответов.

- `GET /api/question/:id/answers`  
  Получение списка ответов для конкретного вопроса.

### Проверка прохождения квиза

- `POST /api/quizzes/:id/submit`  
  Отправка ответов на квиз и расчёт результата.

Формат тела запроса:

{
"user_id": 1,
"answers": {
"10":,
​
"11":
​
}
}

Алгоритм:

- загружает вопросы и ответы квиза;
- считает частичные баллы за каждый вопрос:
  - правильные ответы увеличивают счёт;
  - неправильные уменьшают;
  - при отрицательном результате по вопросу балл по нему обнуляется;
- рассчитывает общее количество вопросов, суммарный балл и процент;
- сравнивает результат с лучшим результатом пользователя по этому квизу;
- при улучшении обновляет `total_score` пользователя и добавляет запись в таблицу результатов.

Пример ответа:

{
"score": 8,
"questions": 10,
"percent": 80,
"max_score": 10,
"improved": true
}

### Лидерборд и статистика

- `GET /api/leaderboard`  
  Получение топ‑100 пользователей по суммарному полю `total_score`.

- `GET /api/results/:id`  
  Статистика по квизу: количество прохождений (`plays`) для указанного `quiz_id` с обработкой некорректного идентификатора.

---

## Тестирование backend

### Покрытие тестами

Для обработчиков и вспомогательной логики написан набор модульных тестов, обеспечивающий около **93% покрытия кода backend** на текущий момент.

### Стек и инструменты

- стандартный пакет `testing` для unit‑тестов;
- Gin в тестовом режиме и `net/http/httptest` для эмуляции HTTP‑запросов;
- `go-sqlmock` для имитации работы базы данных и проверки SQL‑запросов без реального подключения к SQLite;
- `testify/require` для удобных ассертов (статус‑коды, тело ответа, структура JSON).

### Организация тестов

- В `test_helpers.go` определены:
  - `newMockDB` — создаёт связку `gorm.DB + sqlmock + in‑memory SQLite`;
  - `setupTestRouter` — поднимает Gin‑роутер с теми же маршрутами, что и в `main.go`.

- Для каждого обработчика (`userHandler`, `quizHandler`, `categoryHandler`, `questionHandler`, `answerHandler`, `testHandler`, `leaderboardHandler`) есть отдельный файл с тестами, которые проверяют:
  - положительные сценарии (корректные запросы, успешные ответы, структура JSON);
  - обработку некорректных входных данных (невалидный JSON, неверные идентификаторы);
  - реакции на ошибки базы данных (ошибки `SELECT`, `INSERT`, `UPDATE`, `DELETE` → ожидаемые 4xx/5xx и текст ошибки).

### Особенности проверки логики

- В `testHandler_test.go` детально проверяется алгоритм подсчёта баллов:
  - полностью правильные ответы;
  - частично правильные варианты;
  - выбор неверных ответов;
  - отсутствие вопросов;
  - ошибки при чтении результатов и обновлении `total_score`.

- В `userHandler_test.go` покрыты сценарии:
  - регистрация;
  - логин;
  - получение списка пользователей;
  - получение пользователя по `id`;
  - назначение роли `admin`, включая запрет на самоповышение и обработку ошибок БД.

- В `quizHandler_test.go` тестируются:
  - получение списка квизов;
  - выборка квизов по автору;
  - создание и удаление квиза с учётом прав пользователя/администратора;
  - различные ошибки при работе с БД.

Для категорий, вопросов, ответов и лидерборда тестируются как успешные сценарии, так и реакции на пустые выборки и ошибки запросов.

### Запуск тестов и измерение покрытия

Из каталога `backend/internal/handlers`:

cd backend/internal/handlers
go test ./...

Измерение покрытия:

go test ./... -cover
go test ./... -coverprofile=coverage.out
go tool cover -html=coverage.out

На момент подготовки документации суммарное покрытие backend‑части составляет около **93%**, что подтверждает проверку как основных сценариев использования, так и типовых ошибок.

---

## Фронтенд

### Стек и запуск фронтенда

- SPA на **Vue 3** с использованием **Vite** и **vue-router**.
- Основные зависимости:
  - `vue`
  - `vue-router`
  - `axios`
- Dev‑зависимости:
  - `vite`
  - `@vitejs/plugin-vue`
  - `vite-plugin-vue-devtools`

В `vite.config.js` настроены:

- alias `@` → `src`;
- прокси `/api` → `http://localhost:8080` для прозрачного обращения к Go‑backend во время разработки.

Запуск фронта из каталога `frontend`:

cd frontend
npm install # установка зависимостей
npm run dev # режим разработки (http://localhost:5173)
npm run build # продакшен‑сборка
npm run preview # предпросмотр собранной версии

### Структура фронтенд‑проекта

- `src/main.js`  
  Точка входа, создаёт приложение Vue, подключает `App` и роутер.

- `src/App.vue`  
  Корневой layout, внутри которого рендерится текущий экран через `<router-view />`.

- `src/router/router.js`  
  Конфигурация маршрутов:
  - главная;
  - категории;
  - квиз;
  - прохождение квиза;
  - создание квиза;
  - личные квизы;
  - лидерборд;
  - панель администратора;
  - профиль;
  - логин/регистрация.  
  Также здесь реализован `beforeEach`, который выставляет `document.title` из поля `meta.title`.

- `src/store/auth.js`  
  Модуль аутентификации:
  - обёртка над `axios` (интерцепторы, базовый URL);
  - хранение `user` и `token` в реактивном состоянии и `localStorage`;
  - методы `login`, `register`, `logout`, `checkAuth`, `updateProfile`, `refreshToken`, `clearAuth`;
  - вспомогательные функции `setAuthHeader` / `clearAuthHeader`.

- `src/views` — страницы приложения:
  - `HomeView.vue`
  - `Categories.vue`
  - `CategoryQuizzes.vue`
  - `Quiz.vue`
  - `Question.vue` (прохождение квиза)
  - `QuizAdd.vue` (создание квиза)
  - `MyQuizzes.vue`
  - `Leaderboard.vue`
  - `Profil.vue`
  - `AdminPanel.vue`
  - `Login.vue`
  - `Register.vue`

- `src/assets/*.css`  
  Стили для базового оформления, шапки и отдельных страниц:
  - `base.css`
  - `header.css`
  - `categories.css`
  - `quiz.css`
  - `que.css`
  - `myquiz.css`
  - `login.css`
  - `reg.css`

### Навигация и основные экраны

Маршрутизация организована через `vue-router` (history‑режим):

- `/` (`HomeView.vue`)  
  Главная страница с приветствием и переходами к категориям/квизам (lazy‑загрузка компонента).

- `/main` и `/categories` (`Categories.vue`)  
  Список категорий с поиском, количеством категорий и карточками категорий; каждая карточка ведёт к квизам выбранной категории.

- `/category/:id/quizzes` (`CategoryQuizzes.vue`)  
  Квизы в выбранной категории: описание категории, список квизов, сообщения о загрузке/ошибках и пустом списке.

- `/quiz/:id` (`Quiz.vue`)  
  Детальный просмотр квиза: изображение, сложность, статистика, описание и кнопка перехода к прохождению.

- `/quiz/:id/play` (`Question.vue`)  
  Прохождение квиза:
  - загрузка вопросов и ответов;
  - отображение текущего вопроса;
  - выбор вариантов;
  - прогресс‑бар;
  - результаты (баллы, процент, количество вопросов) после отправки.

- `/create-quiz` (`QuizAdd.vue`)  
  Конструктор квиза:
  - форма с названием, описанием, картинкой, категорией и сложностью;
  - динамический список вопросов и ответов;
  - валидация полей;
  - сохранение черновика в `localStorage`;
  - отправка на endpoint создания квиза.

- `/my-quizzes` (`MyQuizzes.vue`)  
  Личный кабинет автора квизов:
  - список созданных квизов;
  - состояния загрузки/ошибки;
  - пустое состояние с предложением создать первый квиз.

- `/leaderboard` (`Leaderboard.vue`)  
  Лидерборд: топ‑100 игроков по суммарному количеству очков и время последнего обновления.

- `/profile` (`Profil.vue`)  
  Профиль текущего пользователя (просмотр и редактирование, использует данные из auth‑store).

- `/adminpanel` (`AdminPanel.vue`)  
  Панель администратора: проверка роли, загрузка списка пользователей, обработка ошибок и подсказки.

- `/login` (`Login.vue`) и `/register` (`Register.vue`)  
  Экраны аутентификации и регистрации с отдельным оформлением, валидациями и отображением ошибок/успешных действий.

### Аутентификация и работа с backend

В `auth.js` создаётся экземпляр `axios` с базовым URL:

- `VITE_API_URL` (если задан в окружении)
- или `http://localhost:3000/api` по умолчанию.

Интерцепторы:

- **запросы** — автоматическое добавление заголовка `Authorization: Bearer <token>` при наличии токена в `localStorage`;
- **ответы** — обработка кода `401 Unauthorized`:
  - очистка состояния аутентификации;
  - удаление токена из `localStorage`;
  - редирект на `/login?session=expired`.

Хранилище аутентификации управляет:

- реактивными переменными `user`, `token`, `loading`, `error`;
- методами `login` / `register` (отправка данных на `/auth/login` и `/auth/register`, сохранение токена и пользователя);
- методом `logout` (очистка токена и пользователя, попытка вызова `/auth/logout`);
- вспомогательными методами `checkAuth`, `refreshToken`, `updateProfile`, `clearAuth`.

На уровне UI информация о пользователе и его роли используется:

- в шапке (`Header.vue`) — переключение между гостевым и авторизованным состоянием, отображение имени пользователя;
- в отдельных страницах (`AdminPanel`, `MyQuizzes`, кнопки управления квизами).

### Визуальное оформление и UX

- `base.css` задаёт:
  - базовую цветовую палитру;
  - CSS‑переменные;
  - типографику и фон;
  - плавные переходы для цвета текста и фона.

Отдельные файлы стилей для ключевых сценариев:

- `login.css` и `reg.css`  
  Полноэкранные страницы авторизации и регистрации с градиентным фоном, карточкой формы, подсказками, отображением ошибок и успешных сообщений.

- `categories.css`  
  Сетка категорий с адаптивными карточками, поиском по категориям и состояниями загрузки/ошибки.

- `quiz.css`  
  Детальная страница квиза с картинкой, сложностью, статистическими блоками и оформленным описанием.

- `que.css`  
  Экран прохождения квиза:
  - прогресс‑бар;
  - карточка вопроса;
  - список ответов с визуальной индикацией выбранных опций;
  - круговой вывод процента/результата;
  - индикатор всех вопросов.

- `myquiz.css`  
  Раздел «Мои квизы» с карточками квизов автора, кнопками создания/удаления и состояниями пустого списка, загрузки и ошибок.

- `header.css`  
  Фиксированная шапка с логотипом, навигацией, блоком авторизации/профиля и адаптивным мобильным меню.

---

## Основные сценарии использования

### 1. Поиск квиза по категории

1. Пользователь открывает страницу категорий `/main` или `/categories`.
2. Вводит текст в поле поиска; список категорий фильтруется по подстроке имени.
3. Выбирает карточку категории и переходит на страницу квизов этой категории `/category/:id/quizzes`.
4. Видит описание категории и список квизов либо сообщение о том, что квизов в категории пока нет.

### 2. Прохождение квиза

1. Пользователь выбирает интересующий квиз (из списка категорий, из раздела «Мои квизы» или другого списка) и переходит на страницу `/quiz/:id`.
2. На странице квиза знакомится с описанием, сложностью и статистикой и нажимает кнопку перехода к прохождению.
3. Интерфейс прохождения по маршруту `/quiz/:id/play` загружает список вопросов и отображает:
   - шапку с названием квиза, номером текущего вопроса и прогресс‑баром;
   - область с текстом вопроса и, при наличии, изображением;
   - список вариантов ответов.
4. В зависимости от количества правильных ответов на вопрос интерфейс позволяет выбрать один или несколько вариантов.
5. Кнопками «Далее» и «Назад» пользователь листает вопросы; индикатор снизу показывает статус каждого (текущий, отвечённый, ожидающий).
6. После выбора ответов на все вопросы пользователь нажимает «Завершить». Клиент отправляет ответы на `/api/quizzes/:id/submit`, сервер рассчитывает результат и возвращает:
   - набранные баллы;
   - общее количество вопросов;
   - процент правильных ответов;
   - вспомогательные поля для статистики.
7. Интерфейс отображает итоговый экран с процентажом, количеством правильных ответов и предложением повторить квиз или вернуться к его описанию.

### 3. Создание собственного квиза

1. Авторизованный пользователь переходит на страницу создания квиза `/create-quiz` (из раздела категорий или «Мои квизы»).
2. Заполняет основную информацию:
   - название;
   - категорию;
   - ссылку на изображение;
   - описание;
   - сложность;
   - лимит времени.
3. Интерфейс валидирует введённые данные (минимальная длина названия, обязательность категории и изображения, формат URL) и показывает сообщения об ошибках под соответствующими полями.
4. Пользователь добавляет вопросы:
   - у каждого вопроса есть текст и, при необходимости, изображение;
   - у каждого вопроса минимум два варианта ответов;
   - минимум один вариант отмечается как правильный.
5. Для вариантов ответов также выполняется проверка на непустой текст и наличие хотя бы одного правильного ответа на каждый вопрос.
6. Пока форма не проходит валидацию, кнопка создания квиза недоступна.
7. После успешного заполнения пользователь нажимает «Создать квиз». Фронтенд формирует payload (автор, основная информация, вопросы и ответы) и отправляет его POST‑запросом на `/api/quizzes`.
8. В случае успеха отображается сообщение об успешном создании и кнопки:
   - перейти на страницу созданного квиза;
   - сбросить форму и начать создание нового квиза.

### 4. Управление своими квизами

1. Авторизованный пользователь открывает раздел `/my-quizzes`.
2. Клиент по `user_id` и токену запрашивает у backend список квизов пользователя `/api/users/:id/quizzes`.
3. Для каждого квиза дополнительно подгружается вспомогательная статистика:
   - количество вопросов;
   - количество прохождений (`plays`).
4. Если у пользователя ещё нет квизов, отображается пустое состояние с подсказкой и кнопкой перехода на страницу создания первого квиза.
5. В обычном режиме показывается сетка карточек квизов с названием, описанием, категорией, датой создания, количеством вопросов и числом прохождений.
6. Клик по карточке открывает страницу соответствующего квиза.
7. На карточке доступна кнопка удаления. При подтверждении отправляется запрос `POST /api/quizzes/delete` с идентификаторами пользователя и квиза; при успешном ответе квиз удаляется из списка на фронтенде.

---

## Роли и права доступа

В системе используются три уровня доступа.

### Гость (неавторизованный пользователь)

- Просмотр списка категорий и квизов.
- Просмотр деталей квиза.
- Нет возможности создавать квизы и сохранять результаты прохождения.

### Обычный пользователь (`role = user`)

- Все возможности гостя.
- Создание собственных квизов.
- Просмотр и управление своими квизами в разделе `/my-quizzes`.
- Прохождение квизов с сохранением результатов.
- Просмотр личной статистики прохождений.

### Администратор (`role = admin`)

- Все возможности обычного пользователя.
- Доступ к панели администратора `/adminpanel`.
- Просмотр списка пользователей.
- Назначение роли `admin` другим пользователям (с ограничением: нельзя повысить самого себя).
- Удаление квизов любых пользователей при необходимости модерации.

---

## Быстрый запуск всего приложения

### Требования

- Go (версия согласно `go.mod`)
- Node.js и npm (версия согласно `frontend/package.json`)
- Git (для клонирования репозитория)

### Шаги запуска

1. Клонировать репозиторий и перейти в корень проекта:

git clone <https://github.com/Rzh3nk/Quizzix.git>
cd Quizzix

2. Установить npm‑зависимости и синхронизировать проект:

npm install
npm run sync

Скрипт `sync`:
- делает `git pull origin main`;
- устанавливает зависимости фронтенда через `npm ci`;
- запускает `go mod tidy` в `backend`. 

3. Запустить backend и frontend одновременно:

npm run dev

Скрипт `dev` запускает параллельно:
- `npm run backend` → `go run .` в `backend/cmd/server`;
- `npm run frontend` → `npm run dev` в `frontend`. 

4. Открыть в браузере:

- интерфейс приложения: `http://localhost:5173`  
  (Vite‑dev‑сервер фронта, запросы к `/api/...` проксируются на Go‑backend).

### Полезные дополнительные команды

- Сборка фронтенда и backend‑бинарника:

npm run build

Собранный сервер будет лежать в `bin/server`. 
- Запуск backend‑тестов и генерация отчёта покрытия:

npm run test

Отчёт сохраняется в `backend/cover.html`. 

- Очистка артефактов сборки:

npm run clean
